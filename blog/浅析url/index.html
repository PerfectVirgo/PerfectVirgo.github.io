<!DOCTYPE html>
<html>
  <head>
  <title>
      
          浅析URL - 董帅志的小窝
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="董帅志" />
  <link rel="shortcut icon" type="image/x-icon" href="http://dongshuaizhi.top/img/favicon.ico">

  
  
  
  
  
  <link rel="stylesheet" href="http://dongshuaizhi.top/style.min.6f642c5866835106e8a19b94463576436c99be9e41a8714ab3df3daa95f6bf90.css" integrity="sha256-b2QsWGaDUQbooZuURjV2Q2yZvp5BqHFKs989qpX2v5A=">
  
  
  
  <link rel="stylesheet" href="http://dongshuaizhi.top/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css" media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB&#43;BLd7VPoFFdCmg9OezbJR26lg/h&#43;Wb3/zb8I=">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  

  <meta property="og:title" content="浅析URL" />
<meta property="og:description" content="1. IP Internet Protocal主要约定了两件事： 如何定位一台设备 如何封装数据报文，以跟其他设备交流 只要你在互联网中，你就有至少一个独特的 IP IP 分为内网" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://dongshuaizhi.top/blog/%E6%B5%85%E6%9E%90url/" />
<meta property="article:published_time" content="2020-04-06T17:13:57+08:00" />
<meta property="article:modified_time" content="2020-04-06T17:13:57+08:00" />
<meta itemprop="name" content="浅析URL">
<meta itemprop="description" content="1. IP Internet Protocal主要约定了两件事： 如何定位一台设备 如何封装数据报文，以跟其他设备交流 只要你在互联网中，你就有至少一个独特的 IP IP 分为内网">
<meta itemprop="datePublished" content="2020-04-06T17:13:57&#43;08:00" />
<meta itemprop="dateModified" content="2020-04-06T17:13:57&#43;08:00" />
<meta itemprop="wordCount" content="1957">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="http://dongshuaizhi.top//img/avatar.jpg"/>
<meta name="twitter:title" content="浅析URL"/>
<meta name="twitter:description" content="1. IP Internet Protocal主要约定了两件事： 如何定位一台设备 如何封装数据报文，以跟其他设备交流 只要你在互联网中，你就有至少一个独特的 IP IP 分为内网"/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  </head>

  <body>
    
  <h1>浅析URL</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="http://dongshuaizhi.top//img/avatar.jpg" alt="">
    <a href="http://dongshuaizhi.top/"><img class="avatar-border" src="http://dongshuaizhi.top//img/avatar-border.svg" alt=""></a>
  </div>
  
  <h2><a class="author" href="http://dongshuaizhi.top/">董帅志</a></h2>
</header>

  
  
  
  <p class="date">April 6, 2020</p>
  
  
  
  
  <div id="contentBody">
    <h2 id="1-ip">1. IP</h2>
<ul>
<li>
<p>Internet Protocal主要约定了两件事：</p>
<ul>
<li>如何定位一台设备</li>
<li>如何封装数据报文，以跟其他设备交流</li>
</ul>
</li>
<li>
<p>只要你在互联网中，你就有至少一个独特的 IP</p>
</li>
<li>
<p>IP 分为内网和外网</p>
<p><img src="https://i.loli.net/2020/04/06/ru7hM4BLHEvngf9.png" alt="IP.png"></p>
</li>
<li>
<p>如何获取外网 IP</p>
<ul>
<li>你从电信租用带宽，一年一千多</li>
<li>你买了一个路由器，然后用电脑和手机分别连接路由器广播出来的无线 WIFI</li>
<li>只要路由器连上电信的服务器，那么路由器就会有一个【外网 IP 】，比如【14.17.32.211】就是一个外网 IP 。这就是你在互联网中的地址</li>
<li>但是如果你重启路由器，那么你很有【可能】被重新分配一个【外网 IP】，也就是说你的路由器没有【固定的外网 IP】</li>
<li>但是有个问题，你的路由器的外网 IP 如果是【14.17.32.211】，那么你的手机和电脑的 IP 又是什么呢？答案是【内网 IP】</li>
</ul>
</li>
<li>
<p>内网 IP</p>
<ul>
<li>路由器会在你家里创建一个内网，内网中的设备使用内网 IP，一般来说这个 IP 的格式都是 【192.168.xxx.xxx】</li>
<li>一般路由会给自己分配一个好记的内网 IP，如【192.168.1.1】</li>
<li>然后路由会给每一个内网中的设备分配一个不同的内网 IP，如电脑是【192.168.1.2】，手机是【192.168.1.3】，以此类推</li>
</ul>
</li>
<li>
<p>路由器的功能</p>
<ul>
<li>现在路由器有两个 IP，一个外网 IP 和一个内网 IP</li>
<li>内网中的设备可以互相访问，但是不能直接访问外网</li>
<li>内网设备想要访问外网，就必须经过路由器中转</li>
<li>外网中的设备可以互相访问，但是无法访问你的内网</li>
<li>外网设备想要把内容送到内网，也必须通过路由器</li>
<li>也就是说内网和外网就像两个隔绝的空间，无法互通，唯一的联通点就是路由器</li>
<li>所以路由器有时候也被叫做【网关】</li>
</ul>
</li>
<li>
<p>几个特殊的 IP</p>
<ul>
<li>
<p>【127.0.0.1】表示自己</p>
</li>
<li>
<p>【localhost】通过 hosts 指定为自己</p>
<p>在 Windows 系统中，hosts 文件位于 C:\Windows\System32\drivers\etc\hosts，它可       以让任何字符串变成一个对应的 IP，比如把hosts文件以管理员身份运行后添加 <code>127.0.0.1 fuck</code>，就可以用 fuck 来表示自己</p>
</li>
<li>
<p>【0.0.0.0】不表示任何设备</p>
</li>
</ul>
</li>
<li>
<p>IP 有了，还需要什么？</p>
<p>需要端口</p>
</li>
</ul>
<h2 id="2-端口">2. 端口</h2>
<ul>
<li>
<p>一台机器可以提供很多服务</p>
<p>每个服务一个号码，这个号码就叫端口号 port</p>
</li>
<li>
<p>一个比喻</p>
<ul>
<li>麦当劳提供两个窗口，一号快餐，二号咖啡</li>
<li>你去快餐窗口点咖啡会被拒绝，让你去另一个窗口</li>
<li>你去咖啡窗口点快餐结果一样</li>
</ul>
</li>
<li>
<p>一台机器可以提供不同服务</p>
<ul>
<li>要提供 HTTP 服务最好使用 80 端口</li>
<li>要提供 HTTPS 服务最好使用 443 端口</li>
<li>要提供 FTP 服务最好使用 21 端口</li>
<li>一共有 65535 个端口（基本够用）</li>
</ul>
</li>
<li>
<p>怎么知道应该用什么端口</p>
<p><a href="https://zh.wikipedia.org/wiki/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8#0.E5.88.B01023.E5.8F.B7.E7.AB.AF.E5.8F.A3">维基百科</a>一个一个列出来了</p>
</li>
<li>
<p>端口使用还有什么规则</p>
<ul>
<li>
<p>0 到 1023（2的10次方减1）号端口是留给系统使用的</p>
</li>
<li>
<p>你只有拥有了管理员权限后，才能使用这 1024 个端口</p>
</li>
<li>
<p>其他端口可以给普通用户使用</p>
</li>
<li>
<p>比如 http-server 默认使用 8080 端口</p>
<p>如果要用其他端口呢？添加一个参数即可，<code>$ hs -c-1 -p 1234 </code></p>
</li>
<li>
<p>一个端口如果被占用，你就只能换一个端口</p>
</li>
</ul>
</li>
<li>
<p>总而言之</p>
<p><strong>IP 和端口缺一不可</strong></p>
</li>
</ul>
<h2 id="3-域名">3. 域名</h2>
<ul>
<li>
<p>域名就是对 IP 的别称</p>
<ul>
<li>
<p>baidu.com 对应什么 IP</p>
<p><code>$ ping baidu.com</code></p>
</li>
<li>
<p>qq.com 对应什么 IP</p>
<p><code>$ ping qq.com</code></p>
</li>
<li>
<p>知识点</p>
<p>一个域名可以对应不同 IP</p>
<p>这个叫做均衡负载，防止一台机器扛不住</p>
<p>一个 IP 可以对应不同域名</p>
<p>这个叫做共享主机，穷开发者会这么做</p>
</li>
</ul>
</li>
<li>
<p>域名和 IP 是怎么对应起来的</p>
<p>通过 DNS（Domain Name System）</p>
</li>
<li>
<p>当你输入 qq.com</p>
<ul>
<li>
<p>过程</p>
<p>你的 Chrome 浏览器会向电信/联通提供的 DNS 服务器询问 qq.com 对应什么 IP，也可用命令<code>$ nslookup qq.com</code>询问</p>
<p>电信/联通会回答一个 IP（具体过程很复杂，不研究）</p>
<p>然后 Chrome 才会向对应 IP 的 80/443 端口发送请求</p>
<p>请求内容是查看 qq.com 的首页</p>
</li>
<li>
<p>为什么是 80 或 443 端口</p>
<p>服务器默认用 80 提供 http 服务</p>
<p>服务器默认用 443 提供 https 服务</p>
<p>你可以在开发者工具里看到具体的端口</p>
</li>
</ul>
</li>
<li>
<p>题外话</p>
<ul>
<li>
<p>www</p>
<p><a href="http://www.baidu.com">www.baidu.com</a> 和 baidu.com</p>
<p>是同一个域名吗？不是</p>
</li>
<li>
<p>他们是什么关系</p>
<p>com 是顶级域名</p>
<p>baidu.com 是二级域名（俗称一级域名）</p>
<p><a href="http://www.baidu.com">www.baidu.com</a> 是三级域名（俗称二级域名）</p>
<p>他们是父子关系</p>
<p>github.io 把子域名 xxx.github.io 免费给你使用</p>
<p>所以你应该知道 <a href="http://www.baidu.com">www.baidu.com</a> 和 baidu.com 可以不是同一家公司，也可以是</p>
<p>www 是多余的吗？是的，非常多余</p>
</li>
</ul>
</li>
</ul>
<h2 id="4-url">4. URL</h2>
<ul>
<li>
<p>如何请求不同的页面</p>
<ul>
<li>
<p>路径可以做到</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML">https://developer.mozilla.org/zh-CN/docs/Web/HTML</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">https://developer.mozilla.org/zh-CN/docs/Web/CSS</a></p>
</li>
<li>
<p>工具</p>
<p>使用 Chrome 开发者工具 Network 面板看看区别</p>
</li>
</ul>
</li>
<li>
<p>同一个页面，不同内容</p>
<ul>
<li>
<p>查询参数可以做到</p>
<p><a href="https://www.baidu.com/s?wd=hi">https://www.baidu.com/s?wd=hi</a></p>
<p><a href="https://www.baidu.com/s?wd=hello">https://www.baidu.com/s?wd=hello</a></p>
</li>
</ul>
</li>
<li>
<p>同一个内容，不同位置</p>
<ul>
<li>
<p>锚点可以做到</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS#%E5%8F%82%E8%80%83%E4%B9%A6">https://developer.mozilla.org/zh-CN/docs/Web/CSS#参考书</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS#%E6%95%99%E7%A8%8B">https://developer.mozilla.org/zh-CN/docs/Web/CSS#教程</a></p>
</li>
<li>
<p>注意</p>
<p>锚点看起来有中文，实际不支持中文</p>
<p>#参考书会变成#%E5%8F%82%E8%80%83%E4%B9%A6</p>
<p>锚点是无法在 Network 面板看到的</p>
<p>因为锚点不会传给服务器</p>
</li>
</ul>
</li>
<li>
<p>URL</p>
<p>协议 + 域名或 IP + 端口号 + 路径 + 查询字符串 + 锚点</p>
</li>
<li>
<p>URL 举例</p>
<p><img src="https://i.loli.net/2020/04/06/5GHLfQNjpzoTiMK.png" alt="URL.png"></p>
<p>就算没写，你也应该知道端口</p>
<p>HTTPS 默认端口 443</p>
</li>
</ul>
<h2 id="5-http协议">5. HTTP（协议）</h2>
<ul>
<li>
<p>基于 TCP 和 IP 两个协议</p>
</li>
<li>
<p>curl 命令</p>
<ul>
<li>
<p>用 curl 可以发 HTTP 请求</p>
<p><code>$ curl -v http://baidu.com</code></p>
<p><code>$ curl -s -v -- https://www.baidu.com</code></p>
</li>
<li>
<p>理解以下概念</p>
<p>url 会被 curl 工具重写，先请求 DNS 获得 IP</p>
<p>先进行 TCP 连接，TCP 连接成功后，开始发送 HTTP 请求</p>
<p>请求内容看一眼</p>
<p>响应内容看一眼</p>
<p>响应结束后，关闭 TCP 连接（看不出来）</p>
<p>真正结束</p>
</li>
<li>
<p>HTTP</p>
<p>规定请求的格式是什么，响应的格式是什么</p>
</li>
</ul>
</li>
</ul>

  </div>
  <footer>
  <p>
  &copy; 2020 董帅志.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
